<% provide(:title, 'Main Page') %>

<h1> Questions </h1>
<div class="row">
  <%= form_tag diseases_import_path(:dis => @diseases), :method => :post, :id => "questions" do%>
      <table class='table'>
        <thead>
          <tr>
            <th class = "col-md-3">DataSet</th>
            <th class = "col-md-9">Question</th>
          </tr>
        </thead>
        <tbody>
          
        <% @diseases.each do |dis| %>
            <% if !@submission.has_key?(dis.accession) %>
              <tr>        
                <td><%= link_to dis.accession, "http://www.ebi.ac.uk/arrayexpress/experiments/#{dis.accession}/?query=#{dis.disease}", :target => '_blank' %></td>
                <td>
                  <div style="overflow-y:scroll;height:100px;">
                    <table class='table'>
                    <tbody>
                      
                    <% dis.questions.each do |kq,q| %> 
                    <tr>
                      <td width="150px"><%= kq %></td>
                      <td width="100px">
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "1", false, class: 'radio_input') %>Yes</label>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "-1", false, class: 'radio_input') %>No</label>
                        <label><%= link_to "clear", "#", class: 'btn btn-default btn_clear', id: "#{[dis.accession=>kq]}"%></label>
                      </td>
                    </tr>
                    <% end %>
          
                  </tbody>
                </table> 
                </div> 
              </td> 
            </tr> 
            <% end %>
        <% end %>
        <% @diseases.each do |dis| %>
            <% if @submission.has_key?(dis.accession) %>
              <tr>        
                <td><%= link_to dis.accession, "http://www.ebi.ac.uk/arrayexpress/experiments/#{dis.accession}/?query=#{dis.disease}", :target => '_blank' %></td>
                <td>
                  <div style="overflow-y:scroll;height:100px;">
                    <table class='table'>
                    <tbody>
                      
                    <% dis.questions.each do |kq,q| %> 
                    <tr>
                      <td width="150px"><%= kq %></td>
                      <td width="100px">
                        <% if @submission[dis.accession][kq].to_f>0 %>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "1", true, class: 'radio_input') %>Yes</label>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "-1", false, class: 'radio_input') %>No</label>
                        <% elsif @submission[dis.accession][kq].to_f<0 %>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "1", false, class: 'radio_input') %>Yes</label>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "-1", true, class: 'radio_input') %>No</label>
                        <% else %>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "1", false, class: 'radio_input') %>Yes</label>
                        <label><%= radio_button_tag("choose[#{[dis.accession => kq]}]", "-1", false, class: 'radio_input') %>No</label>
                        <% end %>
                        <label><%= link_to "clear", "#", class: 'btn btn-default btn_clear', id: "#{[dis.accession=>kq]}"%></label>
                      </td>
                    </tr>
                    <% end %>
          
                  </tbody>
                </table> 
                </div> 
              </td> 
            </tr> 
            <% end %>
        <% end %>
        </tbody>
      </table>
    <%= link_to 'Submit', "#", :class => "btn btn-success button_wid", :id => "submit"%>
  <% end %>
</div>
