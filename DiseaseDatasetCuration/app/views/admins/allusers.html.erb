<div class = "row">
  <h3>All Users</h3>
</div>


<div class = "row">

  <div class = "col-sm-10"></div>

  <div class = "col-sm-2">
    <div class = row>
      <%= form_tag admin_all_path(), :method => :post, :id => "query_user_form" do%>
      <%= search_field_tag 'query', nil, :class => 'special_input', :placeholder => 'Search Email...', :id => 'query_user' %>
      <% end %>
    </div>
  </div>
</div>

<div class = "row">
  <div class = "col-sm-12">
      <div class="table-responsive">
        <table class = "table">
          <thead>
            <tr>
              <th class = "col-md-1"><%= link_to "ID", admin_all_path(:order => "id") %></th>
              <th class = "col-md-4">Email</th>
              <th class = "col-md-3">Name</th>
              <th class = "col-md-1"><%= link_to "Submission#", admin_all_path(:order => "sub") %></th>
              <th class = "col-md-1"><%= link_to "Correct#", admin_all_path(:order => "correct") %></th>
              <th class = "col-md-1"><%= link_to "Accuracy#", admin_all_path(:order => "accuracy") %></th>
            </tr>
          </thead>
          <tbody>
            <% if !@users.nil? %>
              <% @users.each do |usr| %>
              <tr>
                <td><%= usr.id %></td>
                <td><%= usr.email %></td>
                <td><%= usr.name %></td>
                <% if Submission.find_by_user_id(usr.id)!=nil %>
                <td><%= Submission.find_by_user_id(usr.id).count %></td>
                <td><%= Submission.find_by_user_id(usr.id).num_correct %></td>
                <td><%= Submission.find_by_user_id(usr.id).accuracy.round(3) %></td>
                <% else %>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <% end %>
              </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      </div>
  </div>
</div>


<div class = "row">
  <div class = "col-sm-10">
  </div>
  <div class = "col-sm-2">
    <div class = "row">
      <%= link_to "Show All", "/admin/allusers", :class => "btn btn-primary center-block" %>
    </div>
  </div>
</div>

<div class = "row">
  <% if !@users.nil? %>
    <%= will_paginate @users, renderer: BootstrapPagination::Rails %>
  <% end  %>
</div>
